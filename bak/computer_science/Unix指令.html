<!DOCTYPE html>
<html lang="en">
 <head> 
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
 <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
 <meta name="author" content="Lab X yushengc">
 <meta name="copyright" content="yushengc 2017 all rights Reserved."> 
 <link rel="shortcut icon" href="../images/favi-icon.png" > 
 <!-- jQuery --> 
 <script type="text/javascript" src="../library/jquery/jquery-1.9.0.min.js"></script> 
 <!-- jQuery UI--> 
<link type="text/css" rel="stylesheet" href="../library/jquery-ui/css/ui-lightness/jquery-ui-1.10.0.custom.css"> 
 <script type="text/javascript" src="../library/jquery-ui/js/jquery-ui-1.10.0.custom.min.js"></script> 
 <!-- Bootstrap --> 
 <link type="text/css" rel="stylesheet" href="../library/bootstrap/css/bootstrap.min.css"> 
 <script type="text/javascript" src="../library/bootstrap/js/bootstrap.min.js"></script> 
 <!-- prettify --> 
<link type="text/css" rel="stylesheet" href="../library/prettify/prettify.css"> 
 <script type="text/javascript" src="../library/prettify/prettify.js"></script> 
 <!-- Font --> 
<link type="text/css" rel="stylesheet" href="../css/font-face.css"> 
 <link href='http://fonts.googleapis.com/css?family=Londrina+Shadow' rel='stylesheet' type='text/css'>
 <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'> 
 <!-- Font Awsome--> 
 <link type="text/css" rel="stylesheet" href="../css/font-awesome.css"> 
 <!-- Site Universal Style --> 
 <link type="text/css" rel="stylesheet" href="../css/lab_site.css"> 
 <script type="text/javascript"> 
 $(document).ready(function(){
 prettyPrint(); 
 });
 </script> 
 <meta name="description" content="25sprout Lab Website, we share some useful or interesting tools here.">
<meta name="keywords" content="CSS, HTML, Lab, Tools, jQuery" /> 
 <meta name="URL" content="http://www.25sprout.com/25lab/">
 <meta name="image" content="http://lab.25sprout.com/images/share-image.jpg" /> 
 <meta name="og:image" content="http://lab.25sprout.com/images/share-image.jpg"> 
 <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0"> 
 <meta name="apple-mobile-web-app-capable" content="yes"> 
 <title>Yu-Sheng X Blog</title>
 <link type="text/css" rel="stylesheet" href="../css/style.css"> 
<link type="text/css" rel="stylesheet" href="../css/style_responsive.css"> 
 <script type="text/javascript" src="../js/lab-main.js"></script> 
 </head> 
<body> 
 <header> 
 <a id="title" href="http://yushengc.twbbs.org:9090\blog\"><img src="../images/logo.png"></a> 
 <div class="links"> 
 <a href="http://yushengc.twbbs.org:9090\blog\" class="links-1"></a> 
 </div> 
 </header> 
 <div class="container"> 
 <div class="clear-both"></div> 
 <div class='content-wrapper'> 
<h2>範例一 : 將 last 當中, 有出現 root 那一行取出來</h2>

<pre><code>last | grep 'root'


root pts/1 192.168.0.154 Mon Oct 4 11:03 still logged in
root pts/1 192.168.0.154 Mon Oct 4 10:40 - 10:57 (00:17)
root pts/1 192.168.0.103 Sun Oct 3 21:21 - 22:36 (01:15)
root pts/1 192.168.0.154 Sun Oct 3 12:35 - 13:07 (00:31)
...(以下省略)...</code></pre>

<h2>範例二 : 跟範例一相反, 只要沒有 'root' 字串 就取出</h2>

<pre><code>last | grep -v 'root'

john pts/2 :0.0 Thu Sep 9 10:27 still logged in
john tty7 :0 Thu Sep 9 10:28 still logged in
reboot system boot 2.6.31.12-0.2-de Thu Sep 9 10:27 (25+00:36)
...(以下省略)...</code></pre>

<h3>有用引號的差別</h3>

<p>如果沒有用引號，則* 字元也當成是字串的一部份</p>

<h2>範例三 : 在 last 輸出訊息中, 只要有 'root' 就取出, 並且只取第一欄</h2>

<pre><code>last | grep 'root' | cut -d ' ' -f1</code></pre>

<h2>範例四 : 取出 /etc/passwd 內容含 'ma' 的那幾行</h2>

<pre><code>grep --color=auto 'ma' /etc/passwd

dnsmasq:x:102:65534:dnsmasq:/var/lib/empty:/bin/false
mail:x:8:12:Mailer daemon:/var/spool/clientmqueue:/bin/false
man:x:13:62:Manual pages viewer:/var/cache/man:/bin/bash
max:x:1001:100::/home/max:/bin/bash</code></pre>

<h3>將結果輸出到指定的file</h3>

<p>將index.cpp 中有'include'字眼的行輸出到include.h檔案</p>

<pre><code>grep 'include' index.cpp &gt; include.h</code></pre>

<p>累加到檔案的最後面</p>

<pre><code>grep 'include' index.cpp &gt;&gt; include.h</code></pre>

<h3>計算有幾行</h3>

<pre><code>grep "include" index.cpp | wc -l</code></pre>

<h3>在資料夾中，找出內文中有包含指定字的檔案</h3>

<pre><code>grep -nr 'AutoHeight' </code></pre>

<h3>在資料夾中，找出檔名中有包含指定字的檔案</h3>

<pre><code>find . | grep 'AutoHeight' </code></pre>

<h3>把指定檔案中的１０到１２行print出來</h3>

<pre><code>awk 'FNR&gt;=10 &amp;&amp; FNR&lt;20' float_analyze.c</code></pre>

<h2>進階範例 :</h2>

<h2>範例一 : 用 dmesg 列印出核心訊息, 再以 grep 找出內含 eth 那行</h2>

<pre><code>linux-tl0r:~ # dmesg | grep 'eth'
[ 10.292367] eth0: registered as PCnet/PCI II 79C970A
[ 11.070040] eth0 renamed to eth1 by udevd [353]
[ 11.076056] udev: renamed network interface eth0 to eth1
[ 36.600080] eth1: link up
...(以下省略)...</code></pre>

<h2>範例二 : 承上題, 要將抓到的關鍵字顯色, 且加上行號來表示</h2>

<pre><code>linux-tl0r:~ # dmesg | grep -n --color=auto 'eth'

1040:[ 10.292367] eth0: registered as PCnet/PCI II 79C970A
1050:[ 11.070040] eth0 renamed to eth1 by udevd [353]
...(以下省略)...</code></pre>

<h2>範例三 : 承上題, 在關鍵字所在行的前兩行與後三行也一起抓出來顯示</h2>

<pre><code>linux-tl0r:~ # dmesg | grep -n -A3 -B2 --color=auto 'eth'

1038-[ 10.275502] pcnet32 0000:02:01.0: PCI INT A -&gt; GSI 19 (level, low) -&gt; IRQ 19
1039-[ 10.276265] pcnet32: PCnet/PCI II 79C970A at 0x2000, 00:0c:29:d2:d2:84 assigned IRQ 19.
1040:[ 10.292367] eth0: registered as PCnet/PCI II 79C970A
1041-[ 10.292745] pcnet32: 1 cards_found.
1042-[ 10.296216] agpgart-intel 0000:00:00.0: Intel 440BX Chipset
1043-[ 10.302317] agpgart-intel 0000:00:00.0: AGP aperture is 256M @ 0x0
--</code></pre> </div> 
 </div> 
 </body> 
 </html> 
