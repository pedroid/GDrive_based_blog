<!DOCTYPE html>
<html>
	<head>
	    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
			<script src="https://www.gstatic.com/firebasejs/live/3.1/firebase.js"></script>
		<script src="showdown.min.js"></script>
		<script src="js/new.js"></script>
		<script src="js/raphael.min.js"></script>
		<script src="js/flowchart.min.js"></script>

		<script src="js/markdown.js"></script>
	<script src = "js/html_preprocessing.js"></script>


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<<<<<<< HEAD
<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <script type="text/javascript">
	var currFileID;
        function SendScore(){
			if(!has_submitted){
				console.log('submit!');
				var mode;
				if($("#is_publicInput").prop("checked")){
					mode = "777"
				}else{
					mode = "000"
				}
				//var FolderID = window.location.search.split("?")[1].split('&')[1].split("=")[1];
				var FolderID = parseInt($('#folder_selection select').val());
				//console.log(FolderID);
				$.post(appFiles, {
						  "command":"blog_new",
							"filename": document.getElementById("titleInput").value,
							"content": document.getElementById("text-input").value,
							"FolderID": FolderID,
							"is_public":parseInt($('#is_public_id').val()),
							"is_draft":parseInt($('#is_draft_id').val())

						},
						function (data) {
							currFileID = parseInt(data);
							//console.log(data);
							//$('#feedback').html(data)
						//    document.write("--------------------------");
						//   document.write("Result = "+data);
						//   document.write("--------------------------");
				});
				$('#submit_button').val('update')
				has_submitted = true;
			}else{
				$.post(appFiles, {

						  "command":"blog_update",
						  "FileID":currFileID,
						  "FolderID": parseInt($('#folder_selection select').val()),
						  "filename":  document.getElementById("titleInput").value,
						  "content":document.getElementById("text-input").value,
							"is_public":parseInt($('#is_public_id').val()),
							"is_draft":parseInt($('#is_draft_id').val())
						},
						function (data) {
							//console.log(data);

							//$('#feedback').html(data)
						//    document.write("--------------------------");
						//   document.write("Result = "+data);
						//   document.write("--------------------------");
				});
			}
        }
    </script>
=======
<link rel="stylesheet" href="css/edit_new.css">
>>>>>>> d3397443609f1b7e635eb93fd793e1c44443b977
	</head>
  <body>
<div class="container">
<div class="row" id="row1">

	<div class="col-lg-12 bg-success">

    		title: <input type="text" class="form-control" id="titleInput">
	</div>

	<div class="col-lg-4 bg-success" id="folder_selection">
		<select class="form-control">
			<option value=4>recipe</option>
			<option value=2>computer_science</option>
			<option value=3>woodwork</option>
			<option value=22>teaching_plan</option>
			<option value=21>uxapps.tw</option>
			<option value=24>uxapps.course</option>
			<option value=23>course</option>
			<option value=25>projects</option>
		</select>
</div>
<div class="col-lg-4 bg-success">
	<select id="is_public_id" class="form-control">
				 <option value=0>Private</option>
				 <option value=1>Public</option>

	</select>
</div>

	<div class="col-lg-4 bg-success">
	<select id="is_draft_id" class="form-control">
				 <option value=0>Publish</option>
				 <option value=1>Draft</option>
	</select>
</div>
	<div class="col-lg-12 bg-success">
		<div class="col-lg-1"><a href="http://editor.method.ac/" target="__blank">svg editor</a></div>
		<div class="col-lg-1"><a href="javascript:show_info('flowchart');">@flowchart</a></div>
		<div class="col-lg-1"><a href="javascript:show_info('u2b');">@u2b</a></div>
		<div class="col-lg-1"><a href="javascript:show_info('html');">@html</a></div>
	</ul>
	</div>
	<div class="col-lg-12">
    		<input id="submit_button" class="btn btn-success" type="button" value="submit" onclick="SendScore()">
	</div>
	<div class="col-lg-6" id="title">
	    <textarea class="AutoHeight form-control" id="text-input" oninput=this.editor.update()
               rows="30">Type **Markdown** here.test
	  </textarea>
	</div>
    	<div class="col-lg-6" id="preview"> </div>
	<div class="col-lg-12">
    		<input id="submit_button2" class="btn btn-success" type="button" value="submit" onclick="SendScore()">
			<div id="feedback"></div>
	</div>
<div id="diagram"></div>

	</div>
</div>




   

    

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
  </body>
</html>
